<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History - Sports Assessment</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, rgba(32,201,151,0.8) 0%, rgba(13,110,253,0.8) 100%), 
                        url('https://images.unsplash.com/photo-1552674605-db6ffd4facb5?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80') center/cover no-repeat fixed;
            min-height: 100vh;
        }
        
        .history-section {
            padding: 2rem 0;
        }
        
        .history-card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            margin-top: 2rem;
        }
        
        .history-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
        }
        
        .navbar {
            background: rgba(32,201,151,0.9) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        .card-header {
            background: linear-gradient(135deg, #20c997, #0d6efd) !important;
            border-radius: 25px 25px 0 0 !important;
            padding: 2rem;
        }
        
        .table {
            background: rgba(255,255,255,0.8);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .table thead th {
            background: linear-gradient(135deg, rgba(32,201,151,0.2), rgba(13,110,253,0.2));
            border: none;
            color: #333;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 1.5rem 1rem;
        }
        
        .table tbody td {
            border: none;
            padding: 1.5rem 1rem;
            vertical-align: middle;
            transition: all 0.3s ease;
        }
        
        .table tbody tr {
            border-bottom: 1px solid rgba(32,201,151,0.1);
            transition: all 0.3s ease;
        }
        
        .table tbody tr:hover {
            background: linear-gradient(135deg, rgba(32,201,151,0.05), rgba(13,110,253,0.05));
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .badge {
            padding: 0.75rem 1.5rem;
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .badge.bg-success {
            background: linear-gradient(135deg, #28a745, #20c997) !important;
        }
        
        .badge.bg-warning {
            background: linear-gradient(135deg, #ffc107, #fd7e14) !important;
        }
        
        .badge.bg-danger {
            background: linear-gradient(135deg, #dc3545, #e83e8c) !important;
        }
        
        .badge.bg-secondary {
            background: linear-gradient(135deg, #6c757d, #495057) !important;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #0d6efd, #20c997);
            border: none;
            border-radius: 25px;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(13,110,253,0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(13,110,253,0.4);
            background: linear-gradient(135deg, #20c997, #0d6efd);
        }
        
        .empty-state {
            background: linear-gradient(135deg, rgba(32,201,151,0.1), rgba(13,110,253,0.1));
            border-radius: 20px;
            padding: 4rem 2rem;
            text-align: center;
            border: 2px dashed rgba(32,201,151,0.3);
        }
        
        .empty-state-icon {
            font-size: 5rem;
            margin-bottom: 2rem;
            opacity: 0.7;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .stats-cards {
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #20c997, #0d6efd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .floating-history-icons {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: -1;
        }
        
        .floating-history-icon {
            position: absolute;
            font-size: 2rem;
            opacity: 0.1;
            animation: floatHistory 25s infinite linear;
        }
        
        @keyframes floatHistory {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.1; }
            90% { opacity: 0.1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        .history-icon-1 { left: 12%; animation-delay: 0s; }
        .history-icon-2 { left: 24%; animation-delay: 5s; }
        .history-icon-3 { left: 36%; animation-delay: 10s; }
        .history-icon-4 { left: 48%; animation-delay: 15s; }
        .history-icon-5 { left: 60%; animation-delay: 20s; }
        .history-icon-6 { left: 72%; animation-delay: 3s; }
        .history-icon-7 { left: 84%; animation-delay: 8s; }
    </style>
</head>
<body>
    <div class="floating-history-icons">
        <div class="floating-history-icon history-icon-1">üìä</div>
        <div class="floating-history-icon history-icon-2">üìà</div>
        <div class="floating-history-icon history-icon-3">üèÜ</div>
        <div class="floating-history-icon history-icon-4">üìã</div>
        <div class="floating-history-icon history-icon-5">‚è∞</div>
        <div class="floating-history-icon history-icon-6">üìÅ</div>
        <div class="floating-history-icon history-icon-7">üíæ</div>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/">üèÜ Sports Assessment</a>
            <div class="navbar-nav">
                <a class="nav-link" href="/">Home</a>
                <a class="nav-link" href="/upload/">Upload Video</a>
                <a class="nav-link" href="/history/">History</a>
                {% if user.is_authenticated %}
                <a class="nav-link" href="/admin/logout/">Logout ({{ user.username }})</a>
                {% else %}
                <a class="nav-link" href="/admin/login/">Login</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container history-section">
        {% if assessments %}
        <!-- Statistics Cards -->
        <div class="row stats-cards">
            <div class="col-md-3 mb-3">
                <div class="stat-card">
                    <div class="stat-number">{{ assessments|length }}</div>
                    <h6 class="text-muted mb-0">Total Assessments</h6>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="stat-card">
                    <div class="stat-number">8.2</div>
                    <h6 class="text-muted mb-0">Average Score</h6>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="stat-card">
                    <div class="stat-number">3</div>
                    <h6 class="text-muted mb-0">Sports Analyzed</h6>
                </div>
            </div>
            <div class="col-md-3 mb-3">
                <div class="stat-card">
                    <div class="stat-number">92%</div>
                    <h6 class="text-muted mb-0">Improvement Rate</h6>
                </div>
            </div>
        </div>
        {% endif %}

        <div class="row">
            <div class="col-12">
                <div class="card history-card">
                    <div class="card-header text-white">
                        <h2 class="mb-0 text-center">üìä Your Assessment History</h2>
                    </div>
                    <div class="card-body p-4">
                        {% if assessments %}
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>üìÖ Date</th>
                                        <th>üèÉ‚Äç‚ôÇÔ∏è Sport</th>
                                        <th>üéØ Predicted</th>
                                        <th>‚≠ê Rating</th>
                                        <th>üîß Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for assessment in assessments %}
                                    <tr>
                                        <td class="fw-bold">{{ assessment.created_at|date:"M d, Y H:i" }}</td>
                                        <td>
                                            <span class="badge" style="background: linear-gradient(135deg, #6f42c1, #e83e8c); color: white;">
                                                {{ assessment.sport_type }}
                                            </span>
                                        </td>
                                        <td class="fw-semibold text-primary">{{ assessment.predicted_sport }}</td>
                                        <td>
                                            {% if assessment.rating %}
                                            <span class="badge bg-{% if assessment.rating >= 8 %}success{% elif assessment.rating >= 5 %}warning{% else %}danger{% endif %}">
                                                {{ assessment.rating }}/10 ‚≠ê
                                            </span>
                                            {% else %}
                                            <span class="badge bg-secondary">
                                                ‚è≥ Processing
                                            </span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            {% if assessment.processed %}
                                            <a href="/results/{{ assessment.id }}/" class="btn btn-primary btn-sm">
                                                üìä View Results
                                            </a>
                                            {% else %}
                                            <button class="btn btn-outline-secondary btn-sm" disabled>
                                                ‚è≥ Processing
                                            </button>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        {% else %}
                        <div class="empty-state">
                            <div class="empty-state-icon">üìä</div>
                            <h3 class="text-primary mb-3">No Assessments Yet!</h3>
                            <p class="lead mb-4 text-muted">Start your journey to athletic excellence by uploading your first sports video</p>
                            <a href="/upload/" class="btn btn-primary btn-lg">
                                üöÄ Upload Your First Video
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>